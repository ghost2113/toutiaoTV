<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"><title>开启宝箱</title><link rel="stylesheet" href="./css/reset.css"><link rel="stylesheet" href="./css/common.css"><link rel="stylesheet" href="./css/nfTreasure.css"><script>var _PageHeight=document.documentElement.clientHeight,_PageWidth=document.documentElement.clientWidth,_LoadingTop=61<_PageHeight?(_PageHeight-61)/2:0,_LoadingLeft=215<_PageWidth?(_PageWidth-215)/2:0,_LoadingHtml='<div id="loadingDiv" style="position:absolute;left:0;width:100%;height:'+_PageHeight+'px;top:0;background:url(./img/details_loading.png) no-repeat center center;background-size:100% 100%;opacity:100;filter:alpha(opacity=100);z-index:10000;"></div>';function completeLoading(){if("complete"==document.readyState){var e=document.getElementById("loadingDiv");e.parentNode.removeChild(e),$("#main").css("display","flex")}}document.write(_LoadingHtml),document.onreadystatechange=completeLoading</script></head><body><div id="loadingDiv" style="position:absolute;left:0;width:100%;height:100%;top:0;background:url(img/details_loading.png) no-repeat center center;background-size:100% 100%;background:100% auto;opacity:100;z-index:10000"></div><div class="actiBg"><img src="./img/treasureBg.png" alt=""></div><section id="main"><div class="treasureTit"><img src="./img/treasureTit.png" alt=""></div><div class="treasureTime"></div><div class="treasure"><img class="treasureBg" src="./img/treasure.png" alt=""><div class="openRules"><img class="imgActive" src="./img/treasureActive.gif" alt=""><p class="h4">宝箱规则</p><p>1、活动期间开启神秘宝箱可获得金币或现金</p><p>2、神秘宝箱开启之后三小时您可以再次开启宝箱</p></div></div></section><footer id="footer"><a class="open" href="javascript:void(0);">开启宝箱</a> <a class="countdown" href="javascript:void(0);"><span id="_h"></span><span id="_m"></span><span id="_s"></span></a></footer><div class="mask" style="display:none"><div class="box"><span class="close"></span> <img src="./img/treasureStar2.png" alt=""><p class="p1">恭喜您获得<span class="getGold">10</span>金币</p><p class="p2">收徒越多 奖励越多</p><div class="reward">收取徒弟可以获得更多奖励，每成功收取一个徒弟可以获得3000金币，首次收徒可得2元，收徒越多，奖励越多</div><button class="share" onclick="shareMore()">分享再赚3000金币</button></div></div><script src="./js/rem.js"></script><script src="https://unpkg.com/axios/dist/axios.min.js"></script><script src="./js/zepto.js"></script><script src="./js/fastclick.js"></script><script>var overscroll=function(t){t.addEventListener("touchstart",function(){var e=t.scrollTop,n=t.scrollHeight,o=e+t.offsetHeight;0===e?t.scrollTop=1:o===n&&(t.scrollTop=e-1)}),t.addEventListener("touchmove",function(e){t.offsetHeight<t.scrollHeight&&(e._isScroller=!0)})};function getUrlParams(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(n);return null!=o?unescape(o[2]):null}overscroll(document.querySelector("#main")),document.body.addEventListener("touchmove",function(e){e._isScroller||e.preventDefault()});var nextOpen,userID=getUrlParams("userId"),_handle=!0;function countdown(e){var n,o,t;0<=(e=nextOpen-new Date)&&(Math.floor(e/1e3/60/60/24),n=Math.floor(e/1e3/60/60%24),o=Math.floor(e/1e3/60%60),t=Math.floor(e/1e3%60)),document.getElementById("_h").innerHTML=n+"时",document.getElementById("_m").innerHTML=o+"分",document.getElementById("_s").innerHTML=t+"秒后可再次开启",0===e&&clearInterval(countTime),$("#loadingDiv").hide()}function shareMore(){var e=navigator.userAgent,n=-1<e.indexOf("Android")||-1<e.indexOf("Adr"),o=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);n?window.jsi.shareMore("ok"):o&&window.webkit.messageHandlers.shareMore.postMessage("shareMore")}axios.get(ajaxUrl+"/open/treasure?userId="+userID+"&isSubmit=0").then(function(e){setInterval(countdown,1e3);nextOpen=e.data.leadTime.nextOpen,"可以开宝箱"==e.data.msg?($(".open").show(),$(".countdown").hide()):"该用户还没开过宝箱,可以开启宝箱"==e.data.msg?($(".open").show(),$(".countdown").hide()):"该用户还没开过宝箱,直接开启宝箱"==e.data.msg?($(".open").show(),$(".countdown").hide()):"可以开宝箱，已开"==e.data.msg?($(".open").hide(),$(".countdown").show()):"已经达到今日最多开宝箱获得金币数"==e.data.msg?($(".open").hide(),$(".countdown").show()):"还未到下次开宝箱时间，返回下次开箱时间"==e.data.msg&&($(".open").hide(),$(".countdown").show())}).catch(function(e){console.log(e)}),$(".open").on("click",function(){axios.get(ajaxUrl+"/open/treasure?userId="+userID+"&isSubmit=1").then(function(e){nextOpen=e.data.leadTime.nextOpen;setInterval(countdown,1e3);$(".getGold").text(e.data.getGold),$(".mask").show()}).catch(function(e){console.log(e)})}),$(".close").on("click",function(){$(".mask").hide(),$(".open").hide(),$(".countdown").show()}),setTimeout(function(){$("#loadingDiv").hide()},3e3)</script></body></html>